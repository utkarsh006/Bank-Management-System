#include<iostream.h>
#include<conio.h>
#include<stdio.h>
#include<string.h>
#include<process.h>
struct student
{ char name[100];
  char address[100];
  int acno,depo,with,curr,s,bal,si;
  char tyac;
} st[20];
int count=0;
class bank
{  int i,n,x,a;
     public: void createac();
	     void deposit();
	     void withdraw();
	     void search();
	     void updatac();
	     void interest();
	     void deleteac();
};

// function for registeration
void bank:: createac()
{ cout<<"Enter the no. of customers you want to register= ";
  cin>>n;
    for(i=0;i<n;++i)
    { cout<<"\n\t========= CUSTOMER"<<" "<<i+1<<" "<<"==========="<<"\n";
      cout<<"Enter the name= ";
      gets(st[i].name);
      cout<<"Enter the address= ";
      gets(st[i].address);
      cout<<"Enter your account no. = ";
      cin>>st[i].acno;
      cout<<"Enter type of account ( S for savings and C for current)= ";
      cin>>st[i].tyac;
      cout<<"\n";
    }
    count++;
}

//function for depositing money
void bank::deposit()
{ cout<<"\n\n";
    st[i].s=0;
  cout<<"Enter the account no.= ";
  cin>>a;
   for(i=0;i<n;++i)
     if(a==st[i].acno)
     { cout<<"Enter the amount to be deposited= ";
       cin>>st[i].depo;
       cout<<"MONEY HAS BEEN DEPOSITED SUCCESSFULLY..........\n";
       st[i].s+=st[i].depo;
       st[i].bal=st[i].depo;
	x=0; break;
     }
   else
     x=1;
   if(x==1)
    cout<<"YOUR ACCOUNT NO. IS INVALID...........\n";
}

//function for withdrawing money
void bank::withdraw()
{ cout<<"\n\n";
  cout<<"Enter the account no.= ";
  cin>>a;
   for(i=0;i<n;++i)
     if(a==st[i].acno)
     { cout<<"Enter the amount to be withdrawn= ";
       cin>>st[i].with;
       cout<<"MONEY HAS BEEN WITHDRAWN SUCCESSFULLY..........\n";
       st[i].curr=st[i].depo-st[i].with;
       st[i].bal=st[i].curr;

     if (st[i].curr< st[i].with)
      cout<<" MONEY CAN'T BE WITHDRAWN \n";   x=0; break;
     }
   else
     x=1;
   if(x==1)
    cout<<"YOUR ACCOUNT NO. IS INVALID...........\n";
}

//function for searching
void bank:: search()
{ clrscr();  char na[20]; int choi,h;

  cout<<"\n\t =============== SEARCHING ==============\n";
  cout<<"\n\t1."<<" "<<"SEARCHING ON ACCOUNT NO.\n";
  cout<<"\n\t2."<<" "<<"SEARCHING ON NAME\n";
  cout<<"Enter your choice= ";
  cin>>choi;
   switch(choi)
   { case 1: cout<<"Enter the account no. = ";
	     cin>>a;
	     for(i=0;i<n;++i)
		  if(a==st[i].acno)
		  { cout<<"ACCOUNT EXISTS......\n\n";
		    cout<<"ACCOUNT HOLDER NAME= "<<st[i].name<<"\n";
		    cout<<"TYPE OF ACCOUNT= "<<st[i].tyac<<"\n";
		    cout<<"MONEY DEPOSITED= "<<st[i].depo<<"\n";
		    cout<<"MONEY WITHDRAWN= "<<st[i].with<<"\n";
		    cout<<"ACCOUNT BALANCE= "<<st[i].bal<<"\n";
		      x=0; break;
		  }
		  else
		     x=1;
		  if(x==1)
		    { cout<<"YOUR ACCOUNT NO. IS INVALID...........\n"; }
		  break;
     case 2:  cout<<"Enter the name of account holder to be searched = ";
	      cin>>na;
	     for(i=0;i<n;++i)
		  if(strcmpi(st[i].name,na)==0)
		  { cout<<"ACCOUNT EXISTS......\n\n";
		    cout<<"ACCOUNT HOLDER NAME= "<<st[i].name<<"\n";
		    cout<<"TYPE OF ACCOUNT= "<<st[i].tyac<<"\n";
		    cout<<"MONEY DEPOSITED= "<<st[i].depo<<"\n";
		    cout<<"MONEY WITHDRAWN= "<<st[i].with<<"\n";
		    cout<<"ACCOUNT BALANCE= "<<st[i].bal<<"\n";
		      x=0; break;
		  }
		  else
		     x=1;
		  if(x==1)
		     cout<<"NAME ENTERED IS INVALID...........\n";
		  break;
     default: cout<<"WRONG CHOICE ENTERED !!!!!!\n\n";
   }
}

//function for interest
void bank:: interest()
{ int p,r,t,si;
  cout<<"Enter the account no. = ";
  cin>>a;
	     for(i=0;i<n;++i)
		  if(a==st[i].acno)
		  { cout<<"ACCOUNT EXISTS......\n\n";
		    cout<<"ACCOUNT HOLDER NAME= "<<st[i].name<<"\n";
		    cout<<"TYPE OF ACCOUNT= "<<st[i].tyac<<"\n";
		    cout<<"ACCOUNT BALANCE= "<<st[i].bal<<"\n";
		      x=0; break;
		  }
		  else
		     x=1;
		  if(x==1)
		     cout<<"YOUR ACCOUNT NO. IS INVALID...........\n";
  cout<<"Enter the principal= ";
  cin>>p;
  cout<<"Enter the rate of interest= ";
  cin>>r;
  cout<<"Enter the time= ";
  cin>>t;
  st[i].si=st[i].bal+(p*r*t)/100;

  cout<<"YOUR INTEREST IS= "<<si<<"\n\n";
}

//function for deletion
void bank::deleteac()
{ cout<<"Enter the account no. to be deleted= ";
  cin>>a;
	   for(i=0;i<n;++i)
		  if(a==st[i].acno)
		  { st[i].acno=0;
		    strcpy(st[i].name," ");
  cout<<"\n\t ******** ACCOUNT HAS BEEN DELETED SUCCESSFULLY *********\n";
		     x=0;   break;
		  }
		  else
		     x=1;
		  if(x==1)
		     cout<<"YOUR ACCOUNT NO. IS INVALID...........\n";
}

void main()
{ clrscr();
int ch;char cha;   bank b;
do{
cout<<"\n\t *************** BANK MANAGEMENT *******************\n";
cout<<"\n\t 1."<<" "<<"CREATE NEW ACCOUNT\n";
cout<<"\n\t 2."<<" "<<"DEPOSIT MONEY\n";
cout<<"\n\t 3."<<" "<<"WITHDRAW MONEY\n";
cout<<"\n\t 4."<<" "<<"UPDATED INTEREST IN ALL ACCOUNTS\n";
cout<<"\n\t 5."<<" "<<"DAILY TRANSACTIONS\n";
cout<<"\n\t 6."<<" "<<"CLOSE ACCOUNT\n";
cout<<"\n\t 7."<<" "<<"SEARCH ACCOUNT\n";
cout<<"\n\t 8."<<" "<<"VIEW UPDATED ACCOUNT DETAILS\n";
cout<<"\n\t 9."<<" "<<"EXIT\n";
cout<<"Enter your choice= ";
cin>>ch;
 switch(ch)
 { case 1: b.createac(); break;

   case 2: if(count!=0)
	     b.deposit();
	   else
	    cout<<"SORRY !!! REGISTER CUSTOMER FIRST .......\n"; break;

   case 3: if(count!=0)
	     b.withdraw();
	   else
	    cout<<"SORRY !!! REGISTER CUSTOMER FIRST .......\n"; break;

   case 4: if(count!=0)
	     b.interest();
	   else
	    cout<<"SORRY !!! REGISTER CUSTOMER FIRST .......\n"; break;

   case 5: cout<<"Not prepared\n"; break;

   case 6: if(count!=0)
	     b.deleteac();
	   else
	    cout<<"SORRY !!! REGISTER CUSTOMER FIRST .......\n"; break;
   case 7: if(count!=0)
	     b.search();
	   else
	    cout<<"SORRY !!! REGISTER CUSTOMER FIRST .......\n"; break;
   case 8: cout<<"Not prepared\n"; break;
   case 9: exit(0); break;
   default: cout<<"\n\t WRONG CHOICE ENTERED !!!!!!!!!!!\n";
 }

cout<<"Do you want to continue(Y or N)= ";
cin>>cha;
}

while(cha=='Y'||cha=='y');
getch();}
